<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->

<style type="text/css">
	.table th{
		color: white;
	}

	#ex1Slider .slider-selection {
	background: #BABABA;
}
	.slidecontainer {
  width: 100%;
}

.slider {
  -webkit-appearance: none;
  width: 100%;
  height: 15px;
  border-radius: 5px;
  background: #d3d3d3;
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
}

.slider:hover {
  opacity: 1;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 25px;
  height: 25px;
  border-radius: 50%;
  background: #67a7a8;
  cursor: pointer;
}

.slider::-moz-range-thumb {
  width: 25px;
  height: 25px;
  border-radius: 50%;
  background: #67a7a8;
  cursor: pointer;
}
}
</style>
<div class="row">
	<div class="col-sm-12"><br>
		<div class = "col-sm-4">
			<form action="<%manage_members_admin_index_path%>" method="get">
		        <input type="text" id="search" name="search" class="form-control" placeholder="Search"><br>
		        <input type="submit" value="Submit" class="btn btn-info">
		        <input type="reset" value="Reset" class="btn btn-warning">
	        </form> 
		</div>

		<div class="col-sm-4">
			<form action="<%manage_members_admin_index_path%>" method="get">
	          	<div class="slidecontainer">
					<label>Pair Count:</label>
			  		<input type="range" name = "range" min="1" max="100" value="" class="slider" id="myRange"><br>
			  		<p>Value: <span id="demo"></span></p>
				</div>
	          	<input type="submit" value="Fetch" name="Fetch" class="btn btn-info">
	        </form> 
		</div>
		<div class="col-sm-4">
			<%= link_to "Last Month",  pair_details_admin_index_path(start_date: (Date.today.beginning_of_month - 1.month).to_datetime, end_time: (Date.today.end_of_month - 1.month).to_datetime), class: "btn"%> &nbsp;
        	<%= link_to "Current Month",  pair_details_admin_index_path(start_date: (Date.today.beginning_of_month).to_datetime, end_time: (Date.today.end_of_month).to_datetime), class: "btn"%> &nbsp;
        	<%= link_to "All",  pair_details_admin_index_path, class: "btn"%> 
		</div>
	</div>
	<div class="col-sm-12">
		<% @users.where(is_invoice_valid: true).each do |user|%>	
			<div class="col-sm-3" style="margin-left: 10px; margin-right: 10px;">
				<div class="card white bg-info mb-3" style="width: auto;height:auto;">
					 <div class="card-body">
					    <h3 class="card-title">Name: <%= user.name%></h4><br>
					    <h4 class="card-subtitle mb-2 text-muted">Sponser ID: <%= user.sponser_id%> </h4>
					    <div class="card-body table-responsive">
			                <table class="table">
			                  <thead class="text-success">
			                    <th style="font-size: 15px;">Left Wing Users</th>
			                    <th style="font-size: 15px;">Right Wing Users</th>
			                    <th style="font-size: 15px;">Pairs</th>
			                    <th style="font-size: 15px;">Total</th>
			                  </thead>
			                  <tbody>
			                    <tr>
			                     <td style="font-size: 15px;"><%= User.where(id: user.pairs.where.not(left_user_id: nil).pluck(:left_user_id), is_invoice_valid: true).count %></td>
			                      <td style="font-size: 15px;"><%= User.where(id:  user.pairs.where.not(right_user_id: nil).pluck(:right_user_id), is_invoice_valid: true).count %></td>
			                      <td style="font-size: 15px;"><%= User.where(id: user.pairs.where.not(left_user_id: nil, right_user_id: nil), is_invoice_valid: true).count %></td>
			                      <td style="font-size: 15px;"><%= User.where(id:  user.pairs.where.not(left_user_id: nil).pluck(:left_user_id), is_invoice_valid: true).count + User.where(id: user.pairs.where.not(right_user_id: nil).pluck(:right_user_id), is_invoice_valid: true).count %></td>
			                    </tr>
			                  </tbody>
			                </table>
			            </div>
					</div>
				</div>
			</div>
		<%end%>
	</div>
</div>

<script type="text/javascript">
	var slider = document.getElementById("myRange");
	var output = document.getElementById("demo");
	output.innerHTML = slider.value;

	slider.oninput = function() {
	  output.innerHTML = this.value;
}
</script>