<style type="text/css">
/*Now the CSS*/
* {margin: 0; padding: 0;}

.tree ul {
    padding-top: 20px; position: relative;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

.tree li {
    float: left; text-align: center;
    list-style-type: none;
    position: relative;
    padding: 20px 5px 0 5px;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

/*We will use ::before and ::after to draw the connectors*/

.tree li::before, .tree li::after{
    content: '';
    position: absolute; top: 0; right: 50%;
    border-top: 1px solid #ccc;
    width: 50%; height: 20px;
}
.tree li::after{
    right: auto; left: 50%;
    border-left: 1px solid #ccc;
}

/*We need to remove left-right connectors from elements without 
any siblings*/
.tree li:only-child::after, .tree li:only-child::before {
    display: none;
}

/*Remove space from the top of single children*/
.tree li:only-child{ padding-top: 0;}

/*Remove left connector from first child and 
right connector from last child*/
.tree li:first-child::before, .tree li:last-child::after{
    border: 0 none;
}
/*Adding back the vertical connector to the last nodes*/
.tree li:last-child::before{
    border-right: 1px solid #ccc;
    border-radius: 0 5px 0 0;
    -webkit-border-radius: 0 5px 0 0;
    -moz-border-radius: 0 5px 0 0;
}
.tree li:first-child::after{
    border-radius: 5px 0 0 0;
    -webkit-border-radius: 5px 0 0 0;
    -moz-border-radius: 5px 0 0 0;
}

/*Time to add downward connectors from parents*/
.tree ul ul::before{
    content: '';
    position: absolute; top: 0; left: 50%;
    border-left: 1px solid #ccc;
    width: 0; height: 20px;
}

.tree li a{
    border: 1px solid #ccc;
    padding: 5px 10px;
    text-decoration: none;
    color: #666;
    font-family: arial, verdana, tahoma;
    font-size: 11px;
    display: inline-block;

    border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;

    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
}

/*Time for some hover effects*/
/*We will apply the hover effect the the lineage of the element also*/
.tree li a:hover, .tree li a:hover+ul li a {
    border: 1px solid #94a0b4;
}
/*Connector styles on hover*/
.tree li a:hover+ul li::after, 
.tree li a:hover+ul li::before, 
.tree li a:hover+ul::before, 
.tree li a:hover+ul ul::before{
    border-color:  #94a0b4;
}

.center {
  margin: auto;
  width: 50%;
  
  padding: 10px;
}

.treestyle{
    /*padding: 20px;*/
    width: 1;
    width: 1600px;
    height: 1000px;
    border: 3px solid gray;
    background-color: white;
    border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    transition: all 0.5s;
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    /*margin: auto;*/
}

.scroller{
  position: relative;
  /*width: 1600px;*/
  /*height: 1000px;*/
  overflow: auto;
}

.avatar_men{
	background-image: url("/assets/avatar_men.jpg");
	width: 100px;
	height: 85px;
	background-size: cover;
	background-position: top center;
    /*border-radius: 50%;*/
     -webkit-border-radius: 60px;
    -webkit-background-clip: padding-box;
    -moz-border-radius: 60px;
    -moz-background-clip: padding;
    border-radius: 60px;
    background-clip: padding-box;
}

.black_spot{
	background-image: url("/assets/black_spot.jpeg");
	width: 100px;
	height: 85px;
	background-size: cover;
	background-position: top center;
    /*border-radius: 50%;*/
     -webkit-border-radius: 60px;
    -webkit-background-clip: padding-box;
    -moz-border-radius: 60px;
    -moz-background-clip: padding;
    border-radius: 60px;
    background-clip: padding-box;
}


.avatar_female{
	background-image: url("/assets/avatar_female.jpg");
	width: 100px;
	height: 85px;
	background-size: cover;
	background-position: top center;
    /*border-radius: 50%;*/
     -webkit-border-radius: 60px;
    -webkit-background-clip: padding-box;
    -moz-border-radius: 60px;
    -moz-background-clip: padding;
    border-radius: 60px;
    background-clip: padding-box;
}
.container-fluid{
	background-color: #dbdbdb;
}

.action_control_section {
	padding: 20px;
	background-color: white;
	margin: auto;
	border: 2px gray;
}

</style>
<div class="container-fluid scroller" style="padding: 10px">
	<div class="action_control_section">
		<!-- <div class="col-6"> -->
		<div class="md-form mb-5"><br>
			<%= form_for :anything, url: graph_dashboard_index_path, method: :get do |form| %>
				<%#= form.label :SponserID %>
			  <%= form.text_field :name, placeholder: "SponserID" ,class: "form-control" %><br>
			  <%= form.text_field :down_level, placeholder: "Down Level" ,class: "form-control" %><br>
			  <%= form.submit "Fetch", class: "btn btn-secondary" %>
			  <%= form.submit "Reset", type: "reset", class: "btn btn-warning" %>
			  <%= link_to "Back", dashboard_index_path, class: "btn btn-danger"%>
			<% end  %>
		</div>
	</div><br>
	<div class="treestyle">
		<div class="tree">
			<ul class="center">
			  	<li >
			    	<a href ="#"class= "<%= @current_user.gender.eql?("male") ? "avatar_men" : "avatar_female"%> rounded-circle"></a>
			    	<p><%= @current_user.name%><br>(<%= @current_user.sponser_id%>)</p>
			    	<ul>
			    		<% @current_user.pairs.where.not(left_user_id: nil, right_user_id: nil).each do |user| %>
				          	<li>
				            	<a href="#" class = "<%= User.find(user.left_user_id).try(:gender).eql?("male") ? "avatar_men" : "avatar_female"%> rounded-circle"></a><p><%= User.find(user.left_user_id).name%><br>(<%= User.find(user.left_user_id).sponser_id%>)</p> 
				            	<% @current_user.pairs.where.not(left_user_id: nil).where(right_user_id: nil).each_with_index do |left_user, i| %>
					            	<ul>
					            		<li>
					            			<a href="#" class = "<%= User.find(left_user.left_user_id).try(:gender).eql?("male") ? "avatar_men" : "avatar_female"%> rounded-circle"></a><p><%= User.find(left_user.left_user_id).name%><br>(<%= User.find(left_user.left_user_id).sponser_id%>)</p>
						            		<% next_element = @current_user.pairs.where.not(left_user_id: nil).where(right_user_id: nil)[i + 1] %>
						            		<% if next_element.present? %>
						            			<ul>
							            			<li>
							            				<a href="" class="black_spot rounded-circle"></a>
							            			</li>
						            				<li>
							            				<a href="" class="black_spot rounded-circle"></a>
							            			</li>
						            			</ul>
						            		<%end%>
					            		</li>
					            		<li>
					            			<% avatar = User.find(left_user.left_user_id).try(:pairs).where(left_user_id: nil).where.not(right_user_id: nil).first.present? ? avatar = User.find(left_user.left_user_id).try(:pairs).where(left_user_id: nil).where.not(right_user_id: nil).first.try(:gender).eql?("male") ? "avatar_men" : "avatar_female" : "black_spot" %>
					            			<a href="" class="<%=avatar%> rounded-circle"></a>
					            		</li>
					            	</ul>
					            <%end%>
				          	</li>
				          	<li>
				          		<a href="#" class = "<%= User.find(user.right_user_id).try(:gender).eql?("male") ? "avatar_men" : "avatar_female"%> rounded-circle"></a><p><%= User.find(user.right_user_id).name%><br>(<%= User.find(user.right_user_id).sponser_id%>)</p>
				          			<% @current_user.pairs.where.not(right_user_id: nil).where(left_user_id: nil).each_with_index do |right_user, i| %>
					            	<ul>
					            		<li>
					            			<a href="#" class = "<%= User.find(right_user.right_user_id).try(:gender).eql?("male") ? "avatar_men" : "avatar_female"%> rounded-circle"></a><p><%= User.find(right_user.right_user_id).name%><br>(<%= User.find(right_user.right_user_id).sponser_id%>)</p>
						            		<% next_element = @current_user.pairs.where.not(right_user_id: nil).where(right_user_id: nil)[i + 1] %>
						            		<% if next_element.present? %>
						            			<ul>
							            			<li>
							            				<a href="" class="black_spot rounded-circle"></a>
							            			</li>
						            				<li>
							            				<a href="" class="black_spot rounded-circle"></a>
							            			</li>
						            			</ul>
						            		<%end%>
					            		</li>
					            		<li>
					            			<% avatar = User.find(right_user.right_user_id).try(:pairs).where(right_user_id: nil).where.not(right_user_id: nil).first.present? ? avatar = User.find(right_user.right_user_id).try(:pairs).where(right_user_id: nil).where.not(right_user_id: nil).first.try(:gender).eql?("male") ? "avatar_men" : "avatar_female" : "black_spot" %>
					            			<a href="" class="<%=avatar%> rounded-circle"></a>
					            		</li>
					            	</ul>
					            <%end%>
				          	</li>
			    		<%end%> 
		        	</ul>
		      	</li>  
			  </li>
			</ul>
		</div>
	</div>
</div>

<script type="text/javascript">

	function charf() {
		var data = "<%= @current_user.pairs.where.not(left_user_id: nil).where(right_user_id: nil) %>";

		return console.log("data");
		// body...
	}

</script>
